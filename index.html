<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 9 Astro-Cadet Training</title>
    <style>
        :root {
            --space-black: #0b0d17;
            --star-white: #e6e6ff;
            --neon-blue: #00f3ff;
            --neon-purple: #bc13fe;
            --alert-red: #ff3860;
            --success-green: #23d160;
            --glass: rgba(255, 255, 255, 0.1);
        }

        body {
            background-color: var(--space-black);
            color: var(--star-white);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            background-image: 
                radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 3px),
                radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 2px),
                radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 3px);
            background-size: 550px 550px, 350px 350px, 250px 250px;
            background-position: 0 0, 40px 60px, 130px 270px;
        }

        header {
            text-align: center;
            padding: 2rem;
            border-bottom: 2px solid var(--neon-blue);
            width: 100%;
            background: rgba(11, 13, 23, 0.9);
            box-shadow: 0 0 20px var(--neon-blue);
        }

        h1 { margin: 0; font-size: 2.5rem; text-transform: uppercase; letter-spacing: 3px; }
        p.subtitle { color: var(--neon-blue); font-weight: bold; }

        .container {
            max-width: 900px;
            width: 100%;
            padding: 20px;
        }

        /* Dashboard Navigation */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .module-card {
            background: var(--glass);
            border: 1px solid var(--neon-purple);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .module-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 15px var(--neon-purple);
            background: rgba(188, 19, 254, 0.2);
        }

        .module-card h3 { margin-top: 0; color: var(--neon-blue); }

        /* Game Sections */
        .game-section {
            display: none;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid var(--neon-blue);
            border-radius: 15px;
            padding: 30px;
            margin-top: 20px;
            animation: fadeIn 0.5s;
        }

        .game-section.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .btn {
            background: transparent;
            border: 2px solid var(--neon-blue);
            color: var(--neon-blue);
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 5px;
            transition: 0.3s;
            margin: 5px;
        }

        .btn:hover { background: var(--neon-blue); color: var(--space-black); }
        .btn-back { border-color: var(--alert-red); color: var(--alert-red); margin-bottom: 20px; }
        .btn-back:hover { background: var(--alert-red); color: white; }

        /* Module 1: Planet Sort */
        .planet-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            min-height: 60px;
            padding: 10px;
            border: 1px dashed #555;
            border-radius: 10px;
        }

        .planet-pill {
            background: #333;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            user-select: none;
            border: 1px solid #777;
        }

        .planet-pill.selected { border-color: var(--neon-blue); background: #2a2a40; }
        
        .drop-zone {
            background: rgba(255,255,255,0.05);
            border: 2px solid var(--neon-purple);
            border-radius: 10px;
            padding: 20px;
            min-height: 100px;
            margin-bottom: 20px;
        }

        .check-btn { background: var(--success-green); border-color: var(--success-green); color: black; width: 100%; font-weight: bold;}

        /* Module 2: Star Lifecycle */
        .lifecycle-stage {
            background: var(--glass);
            margin: 10px 0;
            padding: 15px;
            border-left: 4px solid var(--neon-blue);
        }
        .lifecycle-options { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px;}

        /* Module 3: Quiz */
        .feedback-box {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }
        .feedback-correct { background: rgba(35, 209, 96, 0.2); border: 1px solid var(--success-green); }
        .feedback-wrong { background: rgba(255, 56, 96, 0.2); border: 1px solid var(--alert-red); }

        .hidden { display: none; }

    </style>
</head>
<body>

<header>
    <h1>Astro-Cadet Academy</h1>
    <p class="subtitle">Grade 9 Astronomy Review Terminal</p>
</header>

<div class="container">
    
    <div id="main-menu" class="dashboard-grid">
        <div class="module-card" onclick="loadModule('module1')">
            <h3>01. Solar System Alignment</h3>
            <p>Order the planets and classify them as Terrestrial or Gas Giants.</p>
        </div>
        <div class="module-card" onclick="loadModule('module2')">
            <h3>02. The Stellar Forge</h3>
            <p>Reconstruct the life cycles of stars based on their mass.</p>
        </div>
        <div class="module-card" onclick="loadModule('module3')">
            <h3>03. Comms Officer Trivia</h3>
            <p>Identify terms: Eclipses, Measurements, and Definitions.</p>
        </div>
    </div>

    <div id="module1" class="game-section">
        <button class="btn btn-back" onclick="goHome()">← Return to Base</button>
        <h2>Mission 1: Planetary Alignment</h2>
        <p>Click the planets in the correct order starting from the Sun. Then, categorize the group.</p>
        
        <div id="planet-pool" class="planet-container">
            </div>

        <div class="drop-zone">
            <h4>Your Orbit (Sun --> Outward):</h4>
            <div id="orbit-slots" class="planet-container"></div>
        </div>

        <div id="classification-control" class="hidden">
            <p>Good Order! Now, what type of planets are the first four (Inner)?</p>
            <button class="btn" onclick="checkClassification('Gas Giant')">Gas Giants</button>
            <button class="btn" onclick="checkClassification('Terrestrial')">Terrestrial Planets</button>
        </div>

        <div id="mod1-feedback" class="feedback-box"></div>
    </div>

    <div id="module2" class="game-section">
        <button class="btn btn-back" onclick="goHome()">← Return to Base</button>
        <h2>Mission 2: The Stellar Forge</h2>
        <p>Stars are born in a <strong>Nebula</strong>. What happens next depends on mass.</p>
        
        <div class="lifecycle-stage">
            <h3>Scenario A: Average Mass Star (Like our Sun)</h3>
            <p>Current Stage: <span id="star-a-current" style="color:var(--neon-blue)">Nebula</span></p>
            <div id="star-a-options" class="lifecycle-options"></div>
        </div>
        
        <div class="lifecycle-stage">
            <h3>Scenario B: High Mass Star</h3>
            <p>Current Stage: <span id="star-b-current" style="color:var(--neon-purple)">Nebula</span></p>
            <div id="star-b-options" class="lifecycle-options"></div>
        </div>

        <div id="mod2-feedback" class="feedback-box"></div>
    </div>

    <div id="module3" class="game-section">
        <button class="btn btn-back" onclick="goHome()">← Return to Base</button>
        <h2>Mission 3: Deep Space Comms</h2>
        <p>Answer the incoming transmission queries.</p>
        
        <div id="quiz-container">
            <h3 id="question-text">Question goes here...</h3>
            <div id="quiz-options" class="lifecycle-options" style="flex-direction: column;"></div>
        </div>

        <div id="mod3-feedback" class="feedback-box"></div>
        <button id="next-q-btn" class="btn hidden" onclick="nextQuestion()">Next Transmission >></button>
    </div>

</div>

<script>
    // --- Data ---
    
    // Module 1 Data
    const planets = [
        {name: "Jupiter", type: "Gas"}, {name: "Mercury", type: "Terrestrial"},
        {name: "Neptune", type: "Gas"}, {name: "Mars", type: "Terrestrial"},
        {name: "Earth", type: "Terrestrial"}, {name: "Saturn", type: "Gas"},
        {name: "Venus", type: "Terrestrial"}, {name: "Uranus", type: "Gas"}
    ];
    let userOrbit = [];

    // Module 2 Data
    const starPathA = ["Protostar", "Main Sequence", "Red Giant", "White Dwarf"];
    const starPathB = ["Protostar", "Main Sequence", "Red Supergiant", "Supernova", "Neutron Star/Black Hole"];
    let currentStepA = 0;
    let currentStepB = 0;

    // Module 3 Data
    const questions = [
        {
            q: "We need to measure the distance to the nearest galaxy (Andromeda). Which unit should we use?",
            options: ["Kilometers", "Astronomical Units (AU)", "Light Years", "Parsecs"],
            answer: 2,
            explanation: "Correct! Light Years are used for distances OUTSIDE our solar system (stars/galaxies). AU is for distances WITHIN the solar system."
        },
        {
            q: "Alert! The Moon is passing directly between the Earth and the Sun, blocking our view of the Sun. What event is this?",
            options: ["Lunar Eclipse", "Solar Eclipse", "Full Moon", "Winter Solstice"],
            answer: 1,
            explanation: "Correct! A Solar Eclipse occurs when the New Moon blocks the Sun. A Lunar Eclipse is when Earth blocks the sun from hitting the Moon."
        },
        {
            q: "Analyze the Sun's energy source. What process is occurring in the Core?",
            options: ["Burning Coal", "Nuclear Fission", "Nuclear Fusion", "Chemical Reaction"],
            answer: 2,
            explanation: "Correct! Nuclear Fusion turns Hydrogen into Helium in the core, releasing massive heat and light."
        },
        {
            q: "Identify the object: It is made of ice and dust and has a highly elliptical orbit.",
            options: ["Asteroid", "Comet", "Moon", "Star"],
            answer: 1,
            explanation: "Correct! Comets are 'dirty snowballs' with elliptical orbits. Asteroids are rock/metal found mostly in the belt."
        },
        {
            q: "Why was Pluto reclassified as a Dwarf Planet?",
            options: ["It is too small", "It is too far away", "It hasn't cleared its orbit of debris", "It isn't round"],
            answer: 2,
            explanation: "Correct! While Pluto orbits the Sun and is round, it has not 'cleared its neighborhood' of other debris, which is the 3rd requirement for a Planet."
        }
    ];
    let currentQIndex = 0;

    // --- Navigation Logic ---

    function loadModule(id) {
        document.getElementById('main-menu').style.display = 'none';
        document.querySelectorAll('.game-section').forEach(el => el.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        
        if(id === 'module1') initModule1();
        if(id === 'module2') initModule2();
        if(id === 'module3') initModule3();
    }

    function goHome() {
        document.getElementById('main-menu').style.display = 'grid';
        document.querySelectorAll('.game-section').forEach(el => el.classList.remove('active'));
    }

    // --- Module 1 Logic (Solar System) ---

    function initModule1() {
        userOrbit = [];
        const pool = document.getElementById('planet-pool');
        const slots = document.getElementById('orbit-slots');
        pool.innerHTML = '';
        slots.innerHTML = '';
        document.getElementById('mod1-feedback').style.display = 'none';
        document.getElementById('classification-control').classList.add('hidden');

        // Shuffle planets
        let shuffled = [...planets].sort(() => Math.random() - 0.5);

        shuffled.forEach(p => {
            const pill = document.createElement('div');
            pill.className = 'planet-pill';
            pill.innerText = p.name;
            pill.onclick = () => selectPlanet(p, pill);
            pool.appendChild(pill);
        });
    }

    function selectPlanet(planetObj, element) {
        // Move from pool to orbit
        const slots = document.getElementById('orbit-slots');
        const feedback = document.getElementById('mod1-feedback');
        
        // Correct Order Logic
        const correctOrder = ["Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune"];
        const currentIndex = userOrbit.length;

        if (planetObj.name === correctOrder[currentIndex]) {
            userOrbit.push(planetObj);
            element.remove(); // Remove from pool
            
            const newPill = document.createElement('div');
            newPill.className = 'planet-pill selected';
            newPill.innerText = planetObj.name;
            slots.appendChild(newPill);
            
            feedback.style.display = 'none';

            if (userOrbit.length === 8) {
                document.getElementById('classification-control').classList.remove('hidden');
            }
        } else {
            feedback.className = "feedback-box feedback-wrong";
            feedback.style.display = 'block';
            feedback.innerHTML = `<strong>Incorrect.</strong> ${planetObj.name} is not the next planet from the Sun. Try again!`;
        }
    }

    function checkClassification(choice) {
        const feedback = document.getElementById('mod1-feedback');
        if (choice === 'Terrestrial') {
            feedback.className = "feedback-box feedback-correct";
            feedback.style.display = 'block';
            feedback.innerHTML = `<strong>Mission Success!</strong><br>Mercury, Venus, Earth, and Mars are the <strong>Inner, Terrestrial Planets</strong> (rocky surface).<br>Jupiter, Saturn, Uranus, and Neptune are the <strong>Outer, Gas Giants</strong>.`;
        } else {
            feedback.className = "feedback-box feedback-wrong";
            feedback.style.display = 'block';
            feedback.innerHTML = `<strong>Correction Needed:</strong> The first four planets are rocky, not made of gas. Try again.`;
        }
    }

    // --- Module 2 Logic (Star Life Cycle) ---

    function initModule2() {
        currentStepA = 0;
        currentStepB = 0;
        document.getElementById('star-a-current').innerText = "Nebula";
        document.getElementById('star-b-current').innerText = "Nebula";
        document.getElementById('mod2-feedback').style.display = 'none';
        renderStarOptions();
    }

    function renderStarOptions() {
        const optionsA = document.getElementById('star-a-options');
        const optionsB = document.getElementById('star-b-options');
        optionsA.innerHTML = '';
        optionsB.innerHTML = '';

        // Pool of all terms to confuse user slightly
        const allTerms = ["Supernova", "Red Giant", "White Dwarf", "Red Supergiant", "Protostar", "Main Sequence", "Black Hole", "Neutron Star/Black Hole"];
        
        // Filter out used steps? No, just show relevant next steps mixed with distractors
        
        // Render A Options
        if(currentStepA < starPathA.length) {
            allTerms.sort(() => Math.random() - 0.5).slice(0, 4).forEach(term => {
                // Ensure correct answer is present
                if(!allTerms.includes(starPathA[currentStepA])) return; // Should be covered by slice logic usually, but simplified here:
            });
            
            // Simplified: Just show 3 choices, one correct
            let choicesA = [starPathA[currentStepA]];
            if(starPathA[currentStepA] === "Red Giant") choicesA.push("Red Supergiant");
            else choicesA.push("Black Hole", "Supernova");
            
            choicesA.sort(() => Math.random() - 0.5).forEach(term => {
                const btn = document.createElement('button');
                btn.className = 'btn';
                btn.innerText = term;
                btn.onclick = () => checkStarStep('A', term);
                optionsA.appendChild(btn);
            });
        } else {
             optionsA.innerHTML = "<em>Cycle Complete (Dies as White Dwarf)</em>";
        }

        // Render B Options
        if(currentStepB < starPathB.length) {
            let choicesB = [starPathB[currentStepB]];
            if(starPathB[currentStepB] === "Red Supergiant") choicesB.push("Red Giant");
            else choicesB.push("White Dwarf", "Planetary Nebula");

             choicesB.sort(() => Math.random() - 0.5).forEach(term => {
                const btn = document.createElement('button');
                btn.className = 'btn';
                btn.innerText = term;
                btn.onclick = () => checkStarStep('B', term);
                optionsB.appendChild(btn);
            });
        } else {
            optionsB.innerHTML = "<em>Cycle Complete (Dies as Neutron Star or Black Hole)</em>";
        }
    }

    function checkStarStep(path, answer) {
        const feedback = document.getElementById('mod2-feedback');
        let correctNext = path === 'A' ? starPathA[currentStepA] : starPathB[currentStepB];

        if(answer === correctNext) {
            feedback.className = "feedback-box feedback-correct";
            feedback.style.display = 'block';
            feedback.innerHTML = `<strong>Correct Sequence!</strong> ${answer} is the next stage.`;
            
            if(path === 'A') {
                document.getElementById('star-a-current').innerText += " → " + answer;
                currentStepA++;
            } else {
                document.getElementById('star-b-current').innerText += " → " + answer;
                currentStepB++;
            }
            renderStarOptions();
        } else {
            feedback.className = "feedback-box feedback-wrong";
            feedback.style.display = 'block';
            let hint = "";
            if (answer === "Red Supergiant" && path === 'A') hint = "Only massive stars become Supergiants. Sun-sized stars become Red Giants.";
            if (answer === "White Dwarf" && path === 'B') hint = "Massive stars explode! They don't fade away gently like White Dwarfs.";
            feedback.innerHTML = `<strong>Sequence Error.</strong> ${hint || "That stage does not fit this star's mass category."}`;
        }
    }

    // --- Module 3 Logic (Quiz) ---

    function initModule3() {
        currentQIndex = 0;
        loadQuestion();
    }

    function loadQuestion() {
        const qObj = questions[currentQIndex];
        document.getElementById('question-text').innerText = `Query ${currentQIndex + 1}/${questions.length}: ${qObj.q}`;
        const optsDiv = document.getElementById('quiz-options');
        optsDiv.innerHTML = '';
        document.getElementById('mod3-feedback').style.display = 'none';
        document.getElementById('next-q-btn').classList.add('hidden');

        qObj.options.forEach((opt, idx) => {
            const btn = document.createElement('button');
            btn.className = 'btn';
            btn.innerText = opt;
            btn.onclick = () => checkQuiz(idx);
            optsDiv.appendChild(btn);
        });
    }

    function checkQuiz(selectedIndex) {
        const qObj = questions[currentQIndex];
        const feedback = document.getElementById('mod3-feedback');
        
        if (selectedIndex === qObj.answer) {
            feedback.className = "feedback-box feedback-correct";
            feedback.innerHTML = qObj.explanation;
            document.getElementById('next-q-btn').classList.remove('hidden');
        } else {
            feedback.className = "feedback-box feedback-wrong";
            feedback.innerHTML = "<strong>Incorrect.</strong> Try again.";
        }
        feedback.style.display = 'block';
    }

    function nextQuestion() {
        currentQIndex++;
        if (currentQIndex < questions.length) {
            loadQuestion();
        } else {
            document.getElementById('question-text').innerText = "All Transmissions Analyzed. Good work, Cadet.";
            document.getElementById('quiz-options').innerHTML = '';
            document.getElementById('mod3-feedback').style.display = 'none';
            document.getElementById('next-q-btn').classList.add('hidden');
        }
    }

</script>
</body>
</html>
