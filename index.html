<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 9 Astronomy Review | Astro-Command</title>
    <style>
        :root {
            --space-black: #0b0d17;
            --star-white: #ffffff;
            --neon-blue: #00f3ff;
            --neon-purple: #bc13fe;
            --neon-green: #0aff0a;
            --neon-red: #ff003c;
            --panel-bg: rgba(20, 24, 45, 0.9);
            --font-main: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--space-black);
            background-image: radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 3px),
            radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 2px),
            radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 3px);
            background-size: 550px 550px, 350px 350px, 250px 250px;
            background-position: 0 0, 40px 60px, 130px 270px;
            color: var(--star-white);
            font-family: var(--font-main);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h1 {
            text-shadow: 0 0 10px var(--neon-blue);
            margin-bottom: 5px;
        }

        .subtitle {
            color: var(--neon-purple);
            margin-bottom: 20px;
            font-size: 0.9rem;
        }

        /* --- DASHBOARD NAVIGATION --- */
        .dashboard-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .nav-btn {
            background: transparent;
            border: 1px solid var(--neon-blue);
            color: var(--neon-blue);
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-btn:hover, .nav-btn.active {
            background: var(--neon-blue);
            color: var(--space-black);
            box-shadow: 0 0 15px var(--neon-blue);
        }

        /* --- GAME CONTAINER --- */
        .game-container {
            width: 90%;
            max-width: 800px;
            background: var(--panel-bg);
            border: 1px solid var(--neon-purple);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(188, 19, 254, 0.2);
            min-height: 400px;
            position: relative;
        }

        .hidden { display: none; }

        /* --- MODULE 1: CLASSIFICATION --- */
        .sort-zone {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .category-bucket {
            border: 2px dashed var(--neon-purple);
            padding: 20px;
            text-align: center;
            border-radius: 8px;
            transition: background 0.2s;
            cursor: pointer;
        }

        .category-bucket:hover {
            background: rgba(188, 19, 254, 0.1);
        }

        .current-item-card {
            background: var(--neon-blue);
            color: var(--space-black);
            padding: 20px;
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            border-radius: 5px;
            margin-bottom: 20px;
            box-shadow: 0 0 10px var(--neon-blue);
        }

        /* --- MODULE 2: ALIGNMENT --- */
        .alignment-stage {
            display: flex;
            justify-content: space-around;
            align-items: center;
            background: rgba(0,0,0,0.5);
            height: 150px;
            border-radius: 10px;
            margin: 20px 0;
            padding: 0 20px;
        }

        .celestial-body {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.8rem;
            font-weight: bold;
            cursor: grab;
            position: relative;
            user-select: none;
            border: 2px solid transparent;
        }

        .body-sun { background: yellow; color: black; box-shadow: 0 0 20px orange; width: 80px; height: 80px; }
        .body-earth { background: dodgerblue; color: white; }
        .body-moon { background: gray; color: white; width: 40px; height: 40px; }

        .alignment-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        /* --- MODULE 3: METRICS --- */
        .metric-card {
            text-align: center;
        }

        .metric-input {
            background: transparent;
            border: none;
            border-bottom: 2px solid var(--neon-blue);
            color: white;
            font-size: 1.2rem;
            text-align: center;
            width: 150px;
            margin: 0 10px;
        }

        .metric-input:focus { outline: none; border-bottom: 2px solid var(--neon-green); }

        /* --- FEEDBACK SYSTEM --- */
        .feedback-panel {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            background: rgba(0, 0, 0, 0.6);
            display: none;
        }

        .feedback-correct { border-left: 5px solid var(--neon-green); color: var(--neon-green); }
        .feedback-wrong { border-left: 5px solid var(--neon-red); color: var(--neon-red); }

        .explanation-text {
            color: #ccc;
            margin-top: 5px;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .btn-action {
            background: var(--neon-purple);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
        }

        .btn-action:hover { background: #d94aff; }

        .score-display {
            position: absolute;
            top: 20px;
            right: 20px;
            font-family: monospace;
            font-size: 1.2rem;
            color: var(--neon-green);
        }

    </style>
</head>
<body>

    <h1>ASTRO-COMMAND ACADEMY</h1>
    <div class="subtitle">Grade 9 Astronomy Review Unit</div>

    <div class="dashboard-nav">
        <button class="nav-btn active" onclick="loadModule('sort')">1. The Sorting Nebula</button>
        <button class="nav-btn" onclick="loadModule('align')">2. Alignment Lab</button>
        <button class="nav-btn" onclick="loadModule('metric')">3. Metric Computer</button>
    </div>

    <div id="game-container" class="game-container">
        <div class="score-display">XP: <span id="xp-score">0</span></div>

        <div id="module-sort">
            <h2 style="text-align: center; color: var(--neon-blue);">Classify the Object</h2>
            <p style="text-align: center; color: #aaa;">Identify where the celestial object belongs.</p>
            
            <div id="sort-item-display" class="current-item-card">LOADING...</div>
            
            <div class="sort-zone">
                <div class="category-bucket" id="btn-cat1" onclick="checkSort(0)">Option A</div>
                <div class="category-bucket" id="btn-cat2" onclick="checkSort(1)">Option B</div>
                <div class="category-bucket" id="btn-cat3" onclick="checkSort(2)">Option C</div>
                <div class="category-bucket" id="btn-cat4" onclick="checkSort(3)">Option D</div>
            </div>
        </div>

        <div id="module-align" class="hidden">
            <h2 style="text-align: center; color: var(--neon-blue);">Orbital Alignment</h2>
            <p style="text-align: center; color: #aaa;">Swap the bodies to match the phenomenon.</p>
            
            <div id="align-prompt" class="current-item-card">Solar Eclipse</div>
            
            <div class="alignment-stage">
                <div class="celestial-body body-sun" id="pos-1">SUN</div>
                <div style="width: 20px; height: 2px; background: white;"></div>
                <div class="celestial-body body-earth" id="pos-2">EARTH</div>
                <div style="width: 20px; height: 2px; background: white;"></div>
                <div class="celestial-body body-moon" id="pos-3">MOON</div>
            </div>

            <div class="alignment-controls">
                <button class="btn-action" onclick="swapBodies()">Swap Center & Right</button>
                <button class="btn-action" onclick="checkAlignment()">Confirm Alignment</button>
            </div>
        </div>

        <div id="module-metric" class="hidden">
            <h2 style="text-align: center; color: var(--neon-blue);">Deep Space Conversions</h2>
            <p style="text-align: center; color: #aaa;">Convert the units or define the distance.</p>
            
            <div class="metric-card">
                <h3 id="metric-q">Convert:</h3>
                <div style="font-size: 1.5rem; margin: 20px;">
                    <span id="metric-val">1456</span> <span id="metric-unit-from">m</span>
                    = 
                    <input type="text" id="user-metric-input" class="metric-input" placeholder="?"> 
                    <span id="metric-unit-to">km</span>
                </div>
                <button class="btn-action" onclick="checkMetric()">Submit Calculation</button>
            </div>
        </div>

        <div id="feedback-area" class="feedback-panel">
            <h3 id="feedback-title">Correct!</h3>
            <p id="feedback-content" class="explanation-text">Explanation goes here.</p>
            <button id="next-btn" class="btn-action" onclick="nextQuestion()">Next Mission</button>
        </div>

    </div>

<script>
    // --- STATE MANAGEMENT ---
    let currentModule = 'sort';
    let score = 0;
    let currentQIndex = 0;

    // --- DATA BANKS (Based on Source Text) ---
    
    // Sort Data: Covers Planets [12-14], Stars [16-17], Debris [18-19], Pluto [34]
    const sortData = [
        { item: "Jupiter", options: ["Terrestrial Planet", "Gas Giant", "Star", "Dwarf Planet"], correct: 1, explanation: "Jupiter is a Gas Giant. It is located in the outer solar system and composed mostly of Hydrogen and Helium." },
        { item: "White Dwarf", options: ["Star Birth", "Low Mass Star Death", "High Mass Star Death", "Planet"], correct: 1, explanation: "A White Dwarf is the final stage of a low-to-medium mass star (like our Sun) after it sheds its outer layers." },
        { item: "Pluto", options: ["Terrestrial Planet", "Gas Giant", "Asteroid", "Dwarf Planet"], correct: 3, explanation: "Pluto is a Dwarf Planet. [cite_start]In 2006, it was reclassified because it has not 'cleared its neighborhood' of other objects[cite: 34]." },
        { item: "Comet", options: ["Made of Ice/Dust", "Made of Rock/Metal", "Star", "Galaxy"], correct: 0, explanation: "Comets are 'dirty snowballs' made of ice and dust. [cite_start]They have highly elliptical orbits and develop tails near the Sun[cite: 18]." },
        { item: "Mars", options: ["Terrestrial Planet", "Gas Giant", "Moon", "Asteroid"], correct: 0, explanation: "Mars is a Terrestrial Planet. [cite_start]It is one of the four inner planets with a solid, rocky surface[cite: 13]." },
        [cite_start]{ item: "Black Hole", options: ["Low Mass Star Death", "High Mass Star Death", "Nebula", "Protostar"], correct: 1, explanation: "A Black Hole is formed from the collapse of a very high mass star (supernova remnant)[cite: 16]." },
        [cite_start]{ item: "Nebula", options: ["Star Birthplace", "Star Death", "Planet", "Comet"], correct: 0, explanation: "A Nebula is a giant cloud of gas and dust where stars are born (Protostars)[cite: 16]." },
        [cite_start]{ item: "Asteroid", options: ["Icy Body", "Rocky Body", "Star", "Gas Giant"], correct: 1, explanation: "Asteroids are rocky, airless remnants left over from the early formation of our solar system, mostly found in the belt between Mars and Jupiter[cite: 19]." }
    ];

    // Alignment Data: Covers Eclipses [20-22], Phases [7-8]
    // Config: 0 = Sun-Earth-Moon, 1 = Sun-Moon-Earth
    const alignData = [
        [cite_start]{ name: "Solar Eclipse", targetConfig: 1, explanation: "In a Solar Eclipse, the Moon passes between the Sun and Earth, blocking the Sun's light[cite: 22]." },
        [cite_start]{ name: "Lunar Eclipse", targetConfig: 0, explanation: "In a Lunar Eclipse, the Earth passes between the Sun and Moon, casting a shadow on the Moon[cite: 21]." },
        [cite_start]{ name: "Full Moon", targetConfig: 0, explanation: "During a Full Moon, the Earth is between the Sun and Moon, allowing us to see the fully illuminated side of the Moon[cite: 7]." },
        { name: "New Moon", targetConfig: 1, explanation: "During a New Moon, the Moon is between the Sun and Earth. [cite_start]The illuminated side faces away from us[cite: 8]." }
    ];

    // Metric Data: Covers Conversions [41, 42], Units [4]
    const metricData = [
        { type: "math", val: 1456, uFrom: "m", uTo: "km", ans: 1.456, exp: "To convert meters to km, divide by 1000. 1456 / 1000 = 1.456 km." },
        { type: "math", val: 78.2, uFrom: "kg", uTo: "g", ans: 78200, exp: "To convert kg to g, multiply by 1000. 78.2 * 1000 = 78,200 g." },
        { type: "math", val: 159, uFrom: "hm", uTo: "mm", ans: 15900000, exp: "Hecto (hm) to milli (mm) is a factor of 100,000 (10^5). 159 * 100,000 = 15,900,000." },
        [cite_start]{ type: "def", q: "Distance: Earth to Sun", uFrom: "Unit?", uTo: "", ans: "au", exp: "An Astronomical Unit (AU) is defined as the average distance between the Earth and the Sun (~150 million km)[cite: 4]." },
        [cite_start]{ type: "def", q: "Distance: To other stars", uFrom: "Unit?", uTo: "", ans: "light year", exp: "Distances to other stars/galaxies are measured in Light Years (the distance light travels in one year)[cite: 4]." }
    ];

    // --- GAME LOGIC ---

    function init() {
        loadModule('sort');
    }

    function loadModule(modName) {
        currentModule = modName;
        currentQIndex = 0; // Reset question index for demo purposes (or shuffle in real app)
        
        // UI Switching
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.nav-btn')[modName === 'sort' ? 0 : modName === 'align' ? 1 : 2].classList.add('active');

        document.getElementById('module-sort').classList.add('hidden');
        document.getElementById('module-align').classList.add('hidden');
        document.getElementById('module-metric').classList.add('hidden');
        document.getElementById(`module-${modName}`).classList.remove('hidden');

        hideFeedback();

        if(modName === 'sort') loadSortQuestion();
        if(modName === 'align') loadAlignQuestion();
        if(modName === 'metric') loadMetricQuestion();
    }

    function hideFeedback() {
        document.getElementById('feedback-area').style.display = 'none';
        document.getElementById('next-btn').style.display = 'inline-block'; // Ensure next button is ready
    }

    function showFeedback(isCorrect, text) {
        const fb = document.getElementById('feedback-area');
        const fbTitle = document.getElementById('feedback-title');
        const fbContent = document.getElementById('feedback-content');
        
        fb.style.display = 'block';
        fbTitle.innerText = isCorrect ? "Excellent Work!" : "Correction Needed";
        fbTitle.className = isCorrect ? "feedback-correct" : "feedback-wrong";
        fbContent.innerText = text;

        if (isCorrect) {
            score += 100;
            document.getElementById('xp-score').innerText = score;
        }
    }

    // --- SORTING MODULE LOGIC ---
    function loadSortQuestion() {
        const q = sortData[currentQIndex % sortData.length];
        document.getElementById('sort-item-display').innerText = q.item;
        const buttons = document.querySelectorAll('.category-bucket');
        buttons.forEach((btn, index) => {
            btn.innerText = q.options[index];
            btn.style.pointerEvents = 'auto'; // re-enable clicks
        });
    }

    function checkSort(choiceIndex) {
        const q = sortData[currentQIndex % sortData.length];
        // Disable buttons to prevent double clicking
        document.querySelectorAll('.category-bucket').forEach(b => b.style.pointerEvents = 'none');
        
        if (choiceIndex === q.correct) {
            showFeedback(true, q.explanation);
        } else {
            showFeedback(false, `Not quite. ${q.explanation}`);
        }
    }

    // --- ALIGNMENT MODULE LOGIC ---
    let currentAlignConfig = 0; // 0: S-E-M, 1: S-M-E

    function loadAlignQuestion() {
        const q = alignData[currentQIndex % alignData.length];
        document.getElementById('align-prompt').innerText = `Form a: ${q.name}`;
        
        // Randomize starting position
        currentAlignConfig = Math.random() < 0.5 ? 0 : 1;
        renderAlignment();
    }

    function swapBodies() {
        currentAlignConfig = currentAlignConfig === 0 ? 1 : 0;
        renderAlignment();
    }

    function renderAlignment() {
        const p2 = document.getElementById('pos-2'); // Center
        const p3 = document.getElementById('pos-3'); // Right
        
        if (currentAlignConfig === 0) {
            // Earth Center, Moon Right
            p2.innerText = "EARTH"; p2.className = "celestial-body body-earth";
            p3.innerText = "MOON"; p3.className = "celestial-body body-moon";
        } else {
            // Moon Center, Earth Right
            p2.innerText = "MOON"; p2.className = "celestial-body body-moon";
            p3.innerText = "EARTH"; p3.className = "celestial-body body-earth";
        }
    }

    function checkAlignment() {
        const q = alignData[currentQIndex % alignData.length];
        if (currentAlignConfig === q.targetConfig) {
            showFeedback(true, q.explanation);
        } else {
            showFeedback(false, `Incorrect. ${q.explanation} Try swapping positions.`);
        }
    }

    // --- METRIC MODULE LOGIC ---
    function loadMetricQuestion() {
        const q = metricData[currentQIndex % metricData.length];
        document.getElementById('user-metric-input').value = "";
        
        if(q.type === 'math') {
            document.getElementById('metric-q').innerText = "Calculate Conversion:";
            document.getElementById('metric-val').innerText = q.val;
            document.getElementById('metric-unit-from').innerText = q.uFrom;
            document.getElementById('metric-unit-to').innerText = q.uTo;
        } else {
            document.getElementById('metric-q').innerText = q.q;
            document.getElementById('metric-val').innerText = "";
            document.getElementById('metric-unit-from').innerText = "";
            document.getElementById('metric-unit-to').innerText = "";
            document.getElementById('user-metric-input').placeholder = "Enter Term";
        }
    }

    function checkMetric() {
        const q = metricData[currentQIndex % metricData.length];
        const input = document.getElementById('user-metric-input').value.toLowerCase().trim();
        
        let correct = false;
        
        if (q.type === 'math') {
            // Allow slight margin of error or string matching
            if (parseFloat(input) === q.ans) correct = true;
        } else {
            if (input === q.ans) correct = true;
        }

        if (correct) {
            showFeedback(true, q.exp);
        } else {
            showFeedback(false, `Incorrect. ${q.exp}`);
        }
    }

    // --- GLOBAL CONTROL ---
    function nextQuestion() {
        hideFeedback();
        currentQIndex++;
        if(currentModule === 'sort') loadSortQuestion();
        if(currentModule === 'align') loadAlignQuestion();
        if(currentModule === 'metric') loadMetricQuestion();
    }

    // Start
    init();

</script>
</body>
</html>
